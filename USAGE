Magic-Monkey Pipeline
=====================


Usage

nextflow run [ -resume -with-singularity <sif> -w <workdir> ] -dsl2 main.nf --data_root <root> [ additional parameters ... ]

DESCRIPTION

    --data_root=/path/to/[root]             Root directory containing the subjects to process. The
                                            organisation must agree to the following convention :

                                            [root]
                                            |-<sub-1-tag>
                                            |    |-<ses-1-tag>
                                            |         |-<sub-1-tag>_<ses-1-tag>_dwi.nii.gz
                                            |         |-<sub-1-tag>_<ses-1-tag>_dwi.bval
                                            |         |-<sub-1-tag>_<ses-1-tag>_dwi.bvec
                                            |         |-<sub-1-tag>_<ses-1-tag>_dwi_mask.nii.gz     (optional)
                                            |         |-<sub-1-tag>_<ses-1-tag>_dwi.json            (optional)
                                            |         |-<sub-1-tag>_<ses-1-tag>_t1.nii.gz
                                            |         |-<sub-1-tag>_<ses-1-tag>_t1_mask.nii.gz      (optional)
                                            |         |-<sub-1-tag>_<ses-1-tag>_rev.nii.gz          (optional)
                                            |         |-<sub-1-tag>_<ses-1-tag>_rev.bval            (optional)
                                            |         |-<sub-1-tag>_<ses-1-tag>_rev.bvec            (optional)
                                            |         |-<sub-1-tag>_<ses-1-tag>_rev.json            (optional)
                                            |    |-<ses-2-tag>
                                            |         |-<sub-1-tag>_<ses-2-tag>_dwi.nii.gz
                                            |         |- ...
                                            |-<sub-1-tag>
                                            |    |-<ses-1-tag>
                                            |         |-<sub-1-tag>_<ses-1-tag>_dwi.nii.gz
                                            |         |- ...

OPTIONAL ARGUMENTS

- I/O :
    --default_readout                   Default readout value to assign to datasets missing it ()
    --default_multiband_factor          Default multiband factor to assign to datasets missing it ()
    --default_is_interleaved            Set/Unset input images as slice interleaved if not specified for a dataset ()
    --default_slicing_direction         Default slicing direction of input volumes to assign to datasets missing it ()
    --default_phase_direction           Default phase encoding direction to assign to datasets missing it ()
    --default_acquisition_tensor_type   Default b-tensor shape to assign to datasets missing it [Linear, Planar, Spherical] ()

    --output_root                       Output directory where to put processed datasets ()
    --publish_all                       If true, will publish all files generated by each process in a directory named "all" under the output root ()
    --publish_mode                      Strategy used to copy the processed files in the output root [copy, link] ()
    --verbose_outputs                   Set/Unset the output of additional files and of debug messages in logs ()

- Processing steps activation/deactivation :
    - DWI preprocessing :
        --gaussian_noise_correction     Set/Unset initial background noise removal ()
        --gibbs_ringing_correction      Set/Unset gibbs ringing artifact correction ()
                                        ONLY USE ON DATA WITHOUT PARTIAL FOURIER
        --normalize_inter_b0            Set/Unset normalization of diffusion volumes between sets of b0 volumes ()
        --topup_correction              Set/Unset execution of Topup to correct for susceptibility artifacts ()
        --eddy_correction               Set/Unset execution of Eddy to correct for motion and eddy currents ()
        --dwi_intensity_normalization   Set/Unset N4 intensity normalization for diffusion volumes ()
    - T1 preprocessing :
        --denoise_t1                    Set/Unset initial background noise removal ()
        --t1_intensity_normalization    Set/Unset N4 intensity normalization for T1 volumes ()
    - Registration :
        --t1mask2dwi_registration       Set/Unset registration of T1 mask to diffusion space ()
        --register_t12b0_denoised       Set/Unset registration of T1 volumes to diffusion space after denoising ()
    - Upscaling :
        --resample_data                 Set/Unset resampling of T1 and diffusion volumes after denoising ()
    - Segmentation :
        --generate_segmentation         Set/Unset generation of tissue segmentation on T1 ()
        --generate_wm_segmentation      Set/Unset generation of white matter parcellation on T1 ()
    - Model reconstruction :
        --recons_dti                    Set/Unset reconstruction of the diffusion tensor model ()
        --recons_csd                    Set/Unset reconstruction of the fODF through constrained spherical deconvolution ()
        --recons_diamond                Set/Unset reconstrution of the multi-tensor distribution through DIAMOND ()



